Traceback (most recent call last):
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/openai/_base_client.py", line 1003, in _request
    response = self._client.send(
               ^^^^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/httpx/_client.py", line 914, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/httpx/_client.py", line 942, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/httpx/_client.py", line 979, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/httpx/_client.py", line 1014, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/httpx/_transports/default.py", line 250, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 256, in handle_request
    raise exc from None
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 236, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 101, in handle_request
    raise exc
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 78, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 147, in _connect
    ssl_context.set_alpn_protocols(alpn_protocols)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'PosixPath' object has no attribute 'set_alpn_protocols'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/huanglin/Bitbucket/llmops-poc/template-test/01-chat-prompts.py", line 59, in <module>
    response = llm.invoke(chat_prompt_value.to_messages())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 277, in invoke
    self.generate_prompt(
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 777, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 634, in generate
    raise e
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 624, in generate
    self._generate_with_cache(
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 846, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/langchain_openai/chat_models/base.py", line 686, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/openai/_utils/_utils.py", line 279, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/openai/resources/chat/completions/completions.py", line 879, in create
    return self._post(
           ^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/openai/_base_client.py", line 1290, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/openai/_base_client.py", line 967, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/openai/_base_client.py", line 1105, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/openai/_base_client.py", line 1105, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/huanglin/miniconda3/envs/poc-llm/lib/python3.11/site-packages/openai/_base_client.py", line 1037, in _request
    raise APIConnectionError(request=request) from err
openai.APIConnectionError: Connection error.

Process finished with exit code 1
